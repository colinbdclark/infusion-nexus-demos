<!DOCTYPE html>

<html lang="en">
    <head>
        <title>Nexus Example</title>
        <script src="p5.js"></script>
    </head>
    <body>
        <script type="text/javascript">
            var x = 0;

            var websocket = new WebSocket("ws://localhost:9081/bindModel/example1/a");
            websocket.onmessage = function (evt) {
                x = parseFloat(evt.data);
                // console.log(x);
            };

            function setup () {
                createCanvas(720, 720);
                colorMode(HSB, 360, 100, 100);
                rectMode(CENTER);
                noStroke();
            }

            function draw () {
                var size = constrain(360 + x, 2, 720);
                var color = constrain(mouseY/2, 0, 359);
                var complement = color > 180 ? color - 180 : color + 180;
                background(color, 55, 80);
                fill(complement, 55, 80);
                rect(360, 360, size, size);
            }
        </script>
    </body>
</html>
